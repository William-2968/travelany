<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‰ªäÂ§©ÂéªÂì™Ë£°</title>
    <!-- Tailwind CSS CDN for utility classes -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom fonts for a modern and readable look */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Noto+Sans+TC:wght@400;700&display=swap');

        /* Basic body styling for centering and background */
        body {
            font-family: 'Noto Sans TC', 'Inter', sans-serif;
            background-color: #f0f4f8; /* Light blue-gray background for a clean feel */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh; /* Full viewport height */
            margin: 0;
            padding: 20px;
            box-sizing: border-box; /* Include padding in element's total width and height */
        }

        /* Main container for the slot machine application */
        .container {
            background-color: #ffffff; /* White background */
            border-radius: 20px; /* Rounded corners for a softer look */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); /* Subtle shadow for depth */
            padding: 30px;
            text-align: center;
            max-width: 450px; /* Max width to ensure good mobile display */
            width: 100%; /* Full width within max-width */
            border: 2px solid #cbd5e1; /* Light border for definition */
        }

        /* Title styling */
        h1 {
            color: #2c3e50; /* Dark blue-gray color */
            margin-bottom: 30px;
            font-size: 2.5rem; /* Large font size for prominence */
            font-weight: 700; /* Bold text */
        }

        /* Slot display area styling */
        .slot-display {
            background-color: #ecf0f1; /* Light gray background */
            border-radius: 15px; /* Rounded corners */
            padding: 25px 15px;
            margin-bottom: 30px;
            min-height: 120px; /* Ensures consistent height during animation */
            display: flex;
            flex-direction: column; /* Stack flag and name vertically */
            justify-content: center;
            align-items: center;
            font-size: 2.2rem; /* Large font for readability */
            font-weight: 700;
            color: #34495e; /* Darker text color */
            overflow: hidden; /* Hides content outside the bounds during animation */
            position: relative; /* Needed for absolute positioning of slot items if implemented differently */
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.08); /* Inner shadow for depth */
            border: 1px solid #bdc3c7; /* Light border */
            transition: transform 0.1s ease-out; /* Smooth transition for subtle animations */
        }

        /* Styling for flag emojis */
        .flag-emoji {
            font-size: 3rem; /* Large flag size */
            margin-bottom: 10px;
            display: block; /* Ensures it takes its own line */
        }

        /* Styling for the result text display */
        .result-text {
            font-size: 1.8rem;
            font-weight: 700;
            color: #27ae60; /* Green color for a positive result */
            margin-top: 20px;
            min-height: 60px; /* Reserves space to prevent layout shifts */
            display: flex; /* Uses flexbox for alignment */
            align-items: center; /* Vertically centers content */
            justify-content: center; /* Horizontally centers content */
            flex-wrap: wrap; /* Allows text to wrap on smaller screens */
        }

        /* Adjustments for flag emoji within the result text */
        .result-text .flag-emoji {
            margin-right: 10px; /* Space between flag and text */
            margin-bottom: 0; /* Overrides default margin-bottom from .flag-emoji */
            font-size: 2.5rem; /* Slightly smaller flag in result for better integration */
        }

        /* Base styling for all buttons */
        .button {
            display: inline-block;
            padding: 15px 30px;
            border-radius: 12px; /* Rounded button corners */
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer; /* Indicates interactivity */
            transition: all 0.3s ease; /* Smooth transitions for hover effects */
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); /* Standard button shadow */
            text-decoration: none; /* Removes underline from links */
        }

        /* Styling for the "Start Spin" button */
        .start-button {
            background: linear-gradient(135deg, #3498db, #2980b9); /* Blue gradient */
            color: white; /* White text */
            border: none; /* No border */
            margin-bottom: 20px;
        }

        /* Hover effect for the "Start Spin" button */
        .start-button:hover:not(:disabled) {
            background: linear-gradient(135deg, #2980b9, #3498db); /* Reverse gradient on hover */
            transform: translateY(-2px); /* Slight lift effect */
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15); /* Enhanced shadow on hover */
        }

        /* Disabled state for the "Start Spin" button */
        .start-button:disabled {
            background: #cccccc; /* Gray background when disabled */
            cursor: not-allowed; /* Not-allowed cursor */
            box-shadow: none; /* No shadow when disabled */
        }

        /* Styling for the "Recommend" button */
        .recommend-button {
            background: linear-gradient(135deg, #f39c12, #e67e22); /* Orange gradient */
            color: white; /* White text */
            border: none; /* No border */
            display: none; /* Hidden by default, shown after spin */
            margin-top: 20px;
        }

        /* Hover effect for the "Recommend" button */
        .recommend-button:hover:not(:disabled) {
            background: linear-gradient(135deg, #e67e22, #f39c12); /* Reverse gradient on hover */
            transform: translateY(-2px); /* Slight lift effect */
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15); /* Enhanced shadow on hover */
        }

        /* Responsive adjustments for smaller screens (e.g., mobile phones) */
        @media (max-width: 600px) {
            h1 {
                font-size: 2rem; /* Smaller title on mobile */
            }
            .slot-display {
                font-size: 1.8rem; /* Smaller slot text on mobile */
                padding: 20px 10px;
            }
            .flag-emoji {
                font-size: 2.5rem; /* Smaller flag in slot on mobile */
            }
            .result-text {
                font-size: 1.5rem; /* Smaller result text on mobile */
            }
            .result-text .flag-emoji {
                font-size: 2rem; /* Smaller flag in result on mobile */
            }
            .button {
                padding: 12px 25px; /* Smaller padding for buttons on mobile */
                font-size: 1.1rem; /* Smaller font for buttons on mobile */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‰ªäÂ§©ÂéªÂì™Ë£°</h1>

        <div id="slotDisplay" class="slot-display">
            <!-- Slot content will be dynamically updated here during spinning -->
            <span class="flag-emoji" id="slotFlag">üåç</span>
            <span id="slotCountryName">Ê∫ñÂÇôÊäΩÁ±§...</span>
        </div>

        <button id="startButton" class="button start-button">ÈñãÂßãÊäΩÁ±§</button>

        <div id="resultDisplay" class="result-text"></div>

        <a id="recommendButton" class="button recommend-button" target="_blank" rel="noopener noreferrer">ÁÜ±ÈñÄÊôØÈªûÊé®Ëñ¶</a>
    </div>

    <script>
        // Helper function to convert a two-letter ISO country code to its corresponding Unicode flag emoji.
        // For example, "US" becomes "üá∫üá∏".
        function getFlagEmoji(countryCode) {
            // If no country code is provided, return a generic globe or question mark emoji.
            if (!countryCode) return '‚ùì';
            // Convert each character of the country code to its regional indicator symbol.
            // 'A' becomes 0x1F1E6, 'B' becomes 0x1F1E7, and so on.
            const codePoints = countryCode
                .toUpperCase()
                .split('')
                .map(char => 0x1F1E6 + (char.charCodeAt(0) - 'A'.charCodeAt(0)));
            // Combine the code points into a single string to form the emoji.
            return String.fromCodePoint(...codePoints);
        }

        // Get references to DOM elements
        const slotDisplay = document.getElementById('slotDisplay');
        const slotFlag = document.getElementById('slotFlag');
        const slotCountryName = document.getElementById('slotCountryName');
        const startButton = document.getElementById('startButton');
        const resultDisplay = document.getElementById('resultDisplay');
        const recommendButton = document.getElementById('recommendButton');

        // State variables for the spinning animation
        let spinning = false; // True if the slot machine is currently spinning
        let currentCountryIndex = 0; // Index of the country currently displayed in the slot
        let animationStartTime; // Timestamp when the spinning started
        const totalAnimationDuration = 5000; // Total duration of the spinning animation in milliseconds (5 seconds)
        const baseFrameInterval = 50; // Base interval for updating the display during rapid spin (50ms = 20 frames/sec)

        // Array to hold country data.
        // --- Ë´ãÂ∞áÊÇ®ÁöÑ Notion ÂúãÂÆ∂Ë≥áÊñôË≤ºÂà∞ÈÄôË£° ---
        // ÊØèÂÄãÁâ©‰ª∂ÊáâÂåÖÂê´: chineseName (‰∏≠ÊñáÂêçÁ®±), englishName (Ëã±ÊñáÂêçÁ®±), flagCode (ÂúãÊóó‰ª£Á¢º), continent (Ê¥≤Âà•)
        // ÁØÑ‰æãË≥áÊñô (Ë´ãÊõøÊèõÁÇ∫ÊÇ®ÁöÑÂØ¶ÈöõË≥áÊñô):
        const countries = [
            { chineseName: "ÁæéÂúã", englishName: "United States", flagCode: "US", continent: "ÂåóÁæéÊ¥≤" },
            { chineseName: "Êó•Êú¨", englishName: "Japan", flagCode: "JP", continent: "‰∫ûÊ¥≤" },
            { chineseName: "Ê≥ïÂúã", englishName: "France", flagCode: "FR", continent: "Ê≠êÊ¥≤" },
            { chineseName: "Êæ≥Ê¥≤", englishName: "Australia", flagCode: "AU", continent: "Â§ßÊ¥ãÊ¥≤" },
            { chineseName: "Â∑¥Ë•ø", englishName: "Brazil", flagCode: "BR", continent: "ÂçóÁæéÊ¥≤" },
            { chineseName: "ÂüÉÂèä", englishName: "Egypt", flagCode: "EG", continent: "ÈùûÊ¥≤" },
            { chineseName: "Âæ∑Âúã", englishName: "Germany", flagCode: "DE", continent: "Ê≠êÊ¥≤" },
            { chineseName: "Âä†ÊãøÂ§ß", englishName: "Canada", flagCode: "CA", continent: "ÂåóÁæéÊ¥≤" },
            { chineseName: "Âç∞Â∫¶", englishName: "India", flagCode: "IN", continent: "‰∫ûÊ¥≤" },
            { chineseName: "ÂçóÈùû", englishName: "South Africa", flagCode: "ZA", continent: "ÈùûÊ¥≤" },
            { chineseName: "Á¥êË•øËò≠", englishName: "New Zealand", flagCode: "NZ", continent: "Â§ßÊ¥ãÊ¥≤" },
            { chineseName: "ÈòøÊ†πÂª∑", englishName: "Argentina", flagCode: "AR", continent: "ÂçóÁæéÊ¥≤" },
            { chineseName: "‰∏≠Âúã", englishName: "China", flagCode: "CN", continent: "‰∫ûÊ¥≤" },
            { chineseName: "Ëã±Âúã", englishName: "United Kingdom", flagCode: "GB", continent: "Ê≠êÊ¥≤" },
            { chineseName: "Â¢®Ë•øÂì•", englishName: "Mexico", flagCode: "MX", continent: "ÂåóÁæéÊ¥≤" },
            { chineseName: "Áæ©Â§ßÂà©", englishName: "Italy", flagCode: "IT", continent: "Ê≠êÊ¥≤" },
            { chineseName: "ÈüìÂúã", englishName: "South Korea", flagCode: "KR", continent: "‰∫ûÊ¥≤" },
            { chineseName: "Ë•øÁè≠Áâô", englishName: "Spain", flagCode: "ES", continent: "Ê≠êÊ¥≤" },
            { chineseName: "‰øÑÁæÖÊñØ", englishName: "Russia", flagCode: "RU", continent: "Ê≠êÊ¥≤/‰∫ûÊ¥≤" },
            { chineseName: "Ê≤ôÁÉèÂú∞ÈòøÊãâ‰ºØ", englishName: "Saudi Arabia", flagCode: "SA", continent: "‰∫ûÊ¥≤" },
            { chineseName: "ÁëûÂÖ∏", englishName: "Sweden", flagCode: "SE", continent: "Ê≠êÊ¥≤" },
            { chineseName: "Êå™Â®Å", englishName: "Norway", flagCode: "NO", continent: "Ê≠êÊ¥≤" },
            { chineseName: "‰∏πÈ∫•", englishName: "Denmark", flagCode: "DK", continent: "Ê≠êÊ¥≤" },
            { chineseName: "Ëä¨Ëò≠", englishName: "Finland", flagCode: "FI", continent: "Ê≠êÊ¥≤" },
            { chineseName: "ÁëûÂ£´", englishName: "Switzerland", flagCode: "CH", continent: "Ê≠êÊ¥≤" },
            { chineseName: "Ëç∑Ëò≠", englishName: "Netherlands", flagCode: "NL", continent: "Ê≠êÊ¥≤" },
            { chineseName: "ÊØîÂà©ÊôÇ", englishName: "Belgium", flagCode: "BE", continent: "Ê≠êÊ¥≤" },
            { chineseName: "Â•ßÂú∞Âà©", englishName: "Austria", flagCode: "AT", continent: "Ê≠êÊ¥≤" },
            { chineseName: "Â∏åËáò", englishName: "Greece", flagCode: "GR", continent: "Ê≠êÊ¥≤" },
            { chineseName: "ÂúüËÄ≥ÂÖ∂", englishName: "Turkey", flagCode: "TR", continent: "‰∫ûÊ¥≤/Ê≠êÊ¥≤" },
            { chineseName: "Ê≥∞Âúã", englishName: "Thailand", flagCode: "TH", continent: "‰∫ûÊ¥≤" },
            { chineseName: "Ë∂äÂçó", englishName: "Vietnam", flagCode: "VN", continent: "‰∫ûÊ¥≤" },
            { chineseName: "Âç∞Â∞º", englishName: "Indonesia", flagCode: "ID", continent: "‰∫ûÊ¥≤" },
            { chineseName: "È¶¨‰æÜË•ø‰∫û", englishName: "Malaysia", flagCode: "MY", continent: "‰∫ûÊ¥≤" },
            { chineseName: "Ëè≤ÂæãË≥ì", englishName: "Philippines", flagCode: "PH", continent: "‰∫ûÊ¥≤" },
            { chineseName: "Êñ∞Âä†Âù°", englishName: "Singapore", flagCode: "SG", continent: "‰∫ûÊ¥≤" },
            { chineseName: "ÈòøÊãâ‰ºØËÅØÂêàÂ§ßÂÖ¨Âúã", englishName: "United Arab Emirates", flagCode: "AE", continent: "‰∫ûÊ¥≤" },
            { chineseName: "‰ª•Ëâ≤Âàó", englishName: "Israel", flagCode: "IL", continent: "‰∫ûÊ¥≤" },
            { chineseName: "Âì•ÂÄ´ÊØî‰∫û", englishName: "Colombia", flagCode: "CO", continent: "ÂçóÁæéÊ¥≤" },
            { chineseName: "ÁßòÈ≠Ø", englishName: "Peru", flagCode: "PE", continent: "ÂçóÁæéÊ¥≤" },
            { chineseName: "Êô∫Âà©", englishName: "Chile", flagCode: "CL", continent: "ÂçóÁæéÊ¥≤" },
            { chineseName: "ÂçóÈùû", englishName: "South Africa", flagCode: "ZA", continent: "ÈùûÊ¥≤" },
            { chineseName: "ËÇØ‰∫û", englishName: "Kenya", flagCode: "KE", continent: "ÈùûÊ¥≤" },
            { chineseName: "Êë©Ê¥õÂì•", englishName: "Morocco", flagCode: "MA", continent: "ÈùûÊ¥≤" },
            { chineseName: "Â•àÂèäÂà©‰∫û", englishName: "Nigeria", flagCode: "NG", continent: "ÈùûÊ¥≤" },
            { chineseName: "Á¥êË•øËò≠", englishName: "New Zealand", flagCode: "NZ", continent: "Â§ßÊ¥ãÊ¥≤" },
            { chineseName: "ÊñêÊøü", englishName: "Fiji", flagCode: "FJ", continent: "Â§ßÊ¥ãÊ¥≤" },
            { chineseName: "ÂÜ∞Â≥∂", englishName: "Iceland", flagCode: "IS", continent: "Ê≠êÊ¥≤" },
            { chineseName: "ÊÑõÁàæËò≠", englishName: "Ireland", flagCode: "IE", continent: "Ê≠êÊ¥≤" },
            { chineseName: "Ëë°ËêÑÁâô", englishName: "Portugal", flagCode: "PT", continent: "Ê≠êÊ¥≤" },
            { chineseName: "Êç∑ÂÖã", englishName: "Czech Republic", flagCode: "CZ", continent: "Ê≠êÊ¥≤" },
            { chineseName: "ÂåàÁâôÂà©", englishName: "Hungary", flagCode: "HU", continent: "Ê≠êÊ¥≤" },
            { chineseName: "Ê≥¢Ëò≠", englishName: "Poland", flagCode: "PL", continent: "Ê≠êÊ¥≤" },
            { chineseName: "ÁæÖÈ¶¨Â∞º‰∫û", englishName: "Romania", flagCode: "RO", continent: "Ê≠êÊ¥≤" },
            { chineseName: "ÁÉèÂÖãËò≠", englishName: "Ukraine", flagCode: "UA", continent: "Ê≠êÊ¥≤" },
            { chineseName: "ÂÖãÁæÖÂüÉË•ø‰∫û", englishName: "Croatia", flagCode: "HR", continent: "Ê≠êÊ¥≤" },
            { chineseName: "Â°ûÁàæÁ∂≠‰∫û", englishName: "Serbia", flagCode: "RS", continent: "Ê≠êÊ¥≤" },
            { chineseName: "‰øùÂä†Âà©‰∫û", englishName: "Bulgaria", flagCode: "BG", continent: "Ê≠êÊ¥≤" },
            { chineseName: "ÊñØÊ¥õ‰ºêÂÖã", englishName: "Slovakia", flagCode: "SK", continent: "Ê≠êÊ¥≤" },
            { chineseName: "ÊñØÊ¥õÁ∂≠Â∞º‰∫û", englishName: "Slovenia", flagCode: "SI", continent: "Ê≠êÊ¥≤" },
            { chineseName: "Á´ãÈô∂ÂÆõ", englishName: "Lithuania", flagCode: "LT", continent: "Ê≠êÊ¥≤" },
            { chineseName: "ÊãâËÑ´Á∂≠‰∫û", englishName: "Latvia", flagCode: "LV", continent: "Ê≠êÊ¥≤" },
            { chineseName: "ÊÑõÊ≤ôÂ∞º‰∫û", englishName: "Estonia", flagCode: "EE", continent: "Ê≠êÊ¥≤" },
            { chineseName: "Â≠üÂä†Êãâ", englishName: "Bangladesh", flagCode: "BD", continent: "‰∫ûÊ¥≤" },
            { chineseName: "Â∑¥Âü∫ÊñØÂù¶", englishName: "Pakistan", flagCode: "PK", continent: "‰∫ûÊ¥≤" },
            { chineseName: "ÊñØÈáåËò≠Âç°", englishName: "Sri Lanka", flagCode: "LK", continent: "‰∫ûÊ¥≤" },
            { chineseName: "Â∞ºÊ≥äÁàæ", englishName: "Nepal", flagCode: "NP", continent: "‰∫ûÊ¥≤" },
            { chineseName: "ËíôÂè§", englishName: "Mongolia", flagCode: "MN", continent: "‰∫ûÊ¥≤" },
            { chineseName: "ÂìàËñ©ÂÖã", englishName: "Kazakhstan", flagCode: "KZ", continent: "‰∫ûÊ¥≤" },
            { chineseName: "ÁÉèËå≤Âà•ÂÖã", englishName: "Uzbekistan", flagCode: "UZ", continent: "‰∫ûÊ¥≤" },
            { chineseName: "Á¥ÑÊó¶", englishName: "Jordan", flagCode: "JO", continent: "‰∫ûÊ¥≤" },
            { chineseName: "ÈªéÂ∑¥Â´©", englishName: "Lebanon", flagCode: "LB", continent: "‰∫ûÊ¥≤" },
            { chineseName: "ÊïòÂà©‰∫û", englishName: "Syria", flagCode: "SY", continent: "‰∫ûÊ¥≤" },
            { chineseName: "‰ºäÊãâÂÖã", englishName: "Iraq", flagCode: "IQ", continent: "‰∫ûÊ¥≤" },
            { chineseName: "‰ºäÊúó", englishName: "Iran", flagCode: "IR", continent: "‰∫ûÊ¥≤" },
            { chineseName: "ËëâÈñÄ", englishName: "Yemen", flagCode: "YE", continent: "‰∫ûÊ¥≤" },
            { chineseName: "ÈòøÊõº", englishName: "Oman", flagCode: "OM", continent: "‰∫ûÊ¥≤" },
            { chineseName: "Âç°ÈÅî", englishName: "Qatar", flagCode: "QA", continent: "‰∫ûÊ¥≤" },
            { chineseName: "ÁßëÂ®ÅÁâπ", englishName: "Kuwait", flagCode: "KW", continent: "‰∫ûÊ¥≤" },
            { chineseName: "Â∑¥Êûó", englishName: "Bahrain", flagCode: "BH", continent: "‰∫ûÊ¥≤" },
            { chineseName: "Ë≥ΩÊôÆÂãíÊñØ", englishName: "Cyprus", flagCode: "CY", continent: "‰∫ûÊ¥≤/Ê≠êÊ¥≤" },
            { chineseName: "Âñ¨Ê≤ª‰∫û", englishName: "Georgia", flagCode: "GE", continent: "‰∫ûÊ¥≤/Ê≠êÊ¥≤" },
            { chineseName: "‰∫ûÁæéÂ∞º‰∫û", englishName: "Armenia", flagCode: "AM", continent: "‰∫ûÊ¥≤" },
            { chineseName: "‰∫ûÂ°ûÊãúÁÑ∂", englishName: "Azerbaijan", flagCode: "AZ", continent: "‰∫ûÊ¥≤" },
            { chineseName: "Âè§Â∑¥", englishName: "Cuba", flagCode: "CU", continent: "ÂåóÁæéÊ¥≤" },
            { chineseName: "ÁâôË≤∑Âä†", englishName: "Jamaica", flagCode: "JM", continent: "ÂåóÁæéÊ¥≤" },
            { chineseName: "Â§öÊòéÂ∞ºÂä†", englishName: "Dominican Republic", flagCode: "DO", continent: "ÂåóÁæéÊ¥≤" },
            { chineseName: "Âì•ÊñØÂ§ßÈªéÂä†", englishName: "Costa Rica", flagCode: "CR", continent: "ÂåóÁæéÊ¥≤" },
            { chineseName: "Â∑¥ÊãøÈ¶¨", englishName: "Panama", flagCode: "PA", continent: "ÂåóÁæéÊ¥≤" },
            { chineseName: "ÂßîÂÖßÁëûÊãâ", englishName: "Venezuela", flagCode: "VE", continent: "ÂçóÁæéÊ¥≤" },
            { chineseName: "ÂéÑÁìúÂ§ö", englishName: "Ecuador", flagCode: "EC", continent: "ÂçóÁæéÊ¥≤" },
            { chineseName: "ÁéªÂà©Á∂≠‰∫û", englishName: "Bolivia", flagCode: "BO", continent: "ÂçóÁæéÊ¥≤" },
            { chineseName: "Â∑¥ÊãâÂú≠", englishName: "Paraguay", flagCode: "PY", continent: "ÂçóÁæéÊ¥≤" },
            { chineseName: "ÁÉèÊãâÂú≠", englishName: "Uruguay", flagCode: "UY", continent: "ÂçóÁæéÊ¥≤" },
            { chineseName: "Ë°£Á¥¢ÊØî‰∫û", englishName: "Ethiopia", flagCode: "ET", continent: "ÈùûÊ¥≤" },
            { chineseName: "Âù¶Â∞öÂ∞º‰∫û", englishName: "Tanzania", flagCode: "TZ", continent: "ÈùûÊ¥≤" },
            { chineseName: "Âä†Á¥ç", englishName: "Ghana", flagCode: "GH", continent: "ÈùûÊ¥≤" },
            { chineseName: "Ë±°ÁâôÊµ∑Â≤∏", englishName: "Ivory Coast", flagCode: "CI", continent: "ÈùûÊ¥≤" },
            { chineseName: "ÂñÄÈ∫•ÈöÜ", englishName: "Cameroon", flagCode: "CM", continent: "ÈùûÊ¥≤" },
            { chineseName: "ÂâõÊûúÊ∞ë‰∏ªÂÖ±ÂíåÂúã", englishName: "DR Congo", flagCode: "CD", continent: "ÈùûÊ¥≤" },
            { chineseName: "È¶¨ÈÅîÂä†ÊñØÂä†", englishName: "Madagascar", flagCode: "MG", continent: "ÈùûÊ¥≤" },
            { chineseName: "Ê®°ÈáåË•øÊñØ", englishName: "Mauritius", flagCode: "MU", continent: "ÈùûÊ¥≤" },
            { chineseName: "Êæ≥Ê¥≤", englishName: "Australia", flagCode: "AU", continent: "Â§ßÊ¥ãÊ¥≤" },
            { chineseName: "Â∑¥Â∏É‰∫ûÁ¥êÂπæÂÖß‰∫û", englishName: "Papua New Guinea", flagCode: "PG", continent: "Â§ßÊ¥ãÊ¥≤" },
            { chineseName: "Á¥¢ÁæÖÈñÄÁæ§Â≥∂", englishName: "Solomon Islands", flagCode: "SB", continent: "Â§ßÊ¥ãÊ¥≤" },
            { chineseName: "Ëê¨ÈÇ£Êùú", englishName: "Vanuatu", flagCode: "VU", continent: "Â§ßÊ¥ãÊ¥≤" },
            { chineseName: "Êù±Âä†", englishName: "Tonga", flagCode: "TO", continent: "Â§ßÊ¥ãÊ¥≤" },
            { chineseName: "Ëñ©Êë©‰∫û", englishName: "Samoa", flagCode: "WS", continent: "Â§ßÊ¥ãÊ¥≤" },
            { chineseName: "ÂêâÈáåÂ∑¥ÊñØ", englishName: "Kiribati", flagCode: "KI", continent: "Â§ßÊ¥ãÊ¥≤" },
            { chineseName: "ÂØÜÂÖãÁæÖÂ∞ºË•ø‰∫û", englishName: "Micronesia", flagCode: "FM", continent: "Â§ßÊ¥ãÊ¥≤" },
            { chineseName: "È¶¨Á¥πÁàæÁæ§Â≥∂", englishName: "Marshall Islands", flagCode: "MH", continent: "Â§ßÊ¥ãÊ¥≤" },
            { chineseName: "Ë´æÈ≠Ø", englishName: "Nauru", flagCode: "NR", continent: "Â§ßÊ¥ãÊ¥≤" },
            { chineseName: "Â∏õÁêâ", englishName: "Palau", flagCode: "PW", continent: "Â§ßÊ¥ãÊ¥≤" },
            { chineseName: "ÂêêÁì¶È≠Ø", englishName: "Tuvalu", flagCode: "TV", continent: "Â§ßÊ¥ãÊ¥≤" },
            { chineseName: "ÈòøÁàæÂ∑¥Â∞º‰∫û", englishName: "Albania", flagCode: "AL", continent: "Ê≠êÊ¥≤" },
            { chineseName: "Ê≥¢Â£´Â∞º‰∫ûËàáËµ´Â°ûÂì•Á∂≠Á¥ç", englishName: "Bosnia and Herzegovina", flagCode: "BA", continent: "Ê≠êÊ¥≤" },
            { chineseName: "ËíôÁâπÂÖßÂì•ÁæÖ", englishName: "Montenegro", flagCode: "ME", continent: "Ê≠êÊ¥≤" },
            { chineseName: "ÂåóÈ¶¨ÂÖ∂È†ì", englishName: "North Macedonia", flagCode: "MK", continent: "Ê≠êÊ¥≤" },
            { chineseName: "ÁßëÁ¥¢Ê≤É", englishName: "Kosovo", flagCode: "XK", continent: "Ê≠êÊ¥≤" }, /* XK is user-assigned code for Kosovo */
            { chineseName: "È¶¨Áàæ‰ªñ", englishName: "Malta", flagCode: "MT", continent: "Ê≠êÊ¥≤" },
            { chineseName: "ÁõßÊ£ÆÂ†°", englishName: "Luxembourg", flagCode: "LU", continent: "Ê≠êÊ¥≤" },
            { chineseName: "ÂàóÊîØÊï¶ÊñØÁôª", englishName: "Liechtenstein", flagCode: "LI", continent: "Ê≠êÊ¥≤" },
            { chineseName: "Êë©Á¥çÂì•", englishName: "Monaco", flagCode: "MC", continent: "Ê≠êÊ¥≤" },
            { chineseName: "ËÅñÈ¶¨Âà©Ë´æ", englishName: "San Marino", flagCode: "SM", continent: "Ê≠êÊ¥≤" },
            { chineseName: "Ê¢µËíÇÂ≤°", englishName: "Vatican City", flagCode: "VA", continent: "Ê≠êÊ¥≤" },
            { chineseName: "ÂÆâÈÅìÁàæ", englishName: "Andorra", flagCode: "AD", continent: "Ê≠êÊ¥≤" },
            { chineseName: "ÂÜ∞Â≥∂", englishName: "Iceland", flagCode: "IS", continent: "Ê≠êÊ¥≤" },
            { chineseName: "ÁôΩ‰øÑÁæÖÊñØ", englishName: "Belarus", flagCode: "BY", continent: "Ê≠êÊ¥≤" },
            { chineseName: "Êë©ÁàæÂ§öÁì¶", englishName: "Moldova", flagCode: "MD", continent: "Ê≠êÊ¥≤" },
            { chineseName: "ÁÉèËå≤Âà•ÂÖã", englishName: "Uzbekistan", flagCode: "UZ", continent: "‰∫ûÊ¥≤" },
            { chineseName: "ÂúüÂ∫´Êõº", englishName: "Turkmenistan", flagCode: "TM", continent: "‰∫ûÊ¥≤" },
            { chineseName: "Â°îÂêâÂÖã", englishName: "Tajikistan", flagCode: "TJ", continent: "‰∫ûÊ¥≤" },
            { chineseName: "ÂêâÁàæÂêâÊñØ", englishName: "Kyrgyzstan", flagCode: "KG", continent: "‰∫ûÊ¥≤" },
            { chineseName: "ÈòøÂØåÊ±ó", englishName: "Afghanistan", flagCode: "AF", continent: "‰∫ûÊ¥≤" },
            { chineseName: "‰∏ç‰∏π", englishName: "Bhutan", flagCode: "BT", continent: "‰∫ûÊ¥≤" },
            { chineseName: "Á∑¨Áî∏", englishName: "Myanmar", flagCode: "MM", continent: "‰∫ûÊ¥≤" },
            { chineseName: "ÂØÆÂúã", englishName: "Laos", flagCode: "LA", continent: "‰∫ûÊ¥≤" },
            { chineseName: "Êü¨ÂüîÂØ®", englishName: "Cambodia", flagCode: "KH", continent: "‰∫ûÊ¥≤" },
            { chineseName: "Êù±Â∏ùÊ±∂", englishName: "Timor-Leste", flagCode: "TL", continent: "‰∫ûÊ¥≤" },
            { chineseName: "Ê±∂Ëêä", englishName: "Brunei", flagCode: "BN", continent: "‰∫ûÊ¥≤" },
        ];
        // --- ÂúãÂÆ∂Ë≥áÊñôÁµêÊùü ---

        // Function to update the content of the slot display area.
        function updateSlotDisplay(country) {
            slotFlag.textContent = getFlagEmoji(country.flagCode); // Set the flag emoji
            slotCountryName.textContent = country.chineseName; // Set the Chinese country name
        }

        // Main animation loop for the spinning effect.
        // This function is called repeatedly using setTimeout to create the animation.
        function spinAnimationLoop() {
            // If spinning is false, stop the loop.
            if (!spinning) return;

            // Calculate elapsed time since the animation started.
            const elapsedTime = Date.now() - animationStartTime;
            let currentDelay = baseFrameInterval; // Start with the base interval

            // If the total animation duration has not passed yet, continue spinning.
            if (elapsedTime < totalAnimationDuration) {
                // Calculate progress (0 to 1) of the animation.
                const progress = elapsedTime / totalAnimationDuration;
                // Apply a cubic easing function to the progress for a smoother slowdown effect.
                // This makes the slot slow down more dramatically towards the end.
                const easedProgress = progress * progress * progress;
                
                // Increase the delay between frames significantly as progress increases.
                // This creates the slowing down effect.
                currentDelay = baseFrameInterval + (baseFrameInterval * 15 * easedProgress);

                // Move to the next country in the array, looping back to the beginning if needed.
                currentCountryIndex = (currentCountryIndex + 1) % countries.length;
                // Update the display with the new country.
                updateSlotDisplay(countries[currentCountryIndex]);

                // Add a subtle vertical bounce animation to the slot display during spin.
                // Math.sin creates a wave-like motion, making it more dynamic.
                slotDisplay.style.transform = `translateY(${Math.sin(elapsedTime / 100) * 8}px)`;
                // Apply a quick transition for the bounce effect.
                slotDisplay.style.transition = 'transform 0.05s ease-out';

                // Schedule the next frame of the animation.
                setTimeout(spinAnimationLoop, currentDelay);
            } else {
                // Animation time is up, stop the spinning.
                // Choose a random country as the final result.
                const finalIndex = Math.floor(Math.random() * countries.length);
                currentCountryIndex = finalIndex; // Set the current index to the final chosen country
                updateSlotDisplay(countries[currentCountryIndex]); // Update display one last time
                stopSpinning(); // Call the function to finalize the spin
            }
        }

        // Function to start the spinning animation.
        function startSpinning() {
            // Prevent starting a new spin if one is already in progress.
            if (spinning) return;
            // If there are no countries to choose from, display a message and disable the button.
            if (countries.length === 0) {
                resultDisplay.textContent = "Ê≤íÊúâÂúãÂÆ∂Ë≥áÊñôÂèØ‰æõÊäΩÁ±§ÔºÅ";
                return;
            }

            spinning = true; // Set spinning state to true
            startButton.disabled = true; // Disable the start button during spin
            resultDisplay.innerHTML = ''; // Clear any previous result text
            recommendButton.style.display = 'none'; // Hide the "Recommend" button

            animationStartTime = Date.now(); // Record the start time of the animation
            spinAnimationLoop(); // Begin the animation loop
        }

        // Function to stop the spinning animation and display the result.
        function stopSpinning() {
            spinning = false; // Set spinning state to false
            startButton.disabled = false; // Re-enable the start button

            // Reset the slot display's transform properties (remove bounce and scale).
            slotDisplay.style.transform = 'translateY(0) scale(1)';
            // Apply a smooth transition for this reset.
            slotDisplay.style.transition = 'transform 0.3s ease-out';

            // Get the randomly selected country.
            const selectedCountry = countries[currentCountryIndex];
            // Update the result display with the flag, Chinese name, and continent.
            resultDisplay.innerHTML = `<span class="flag-emoji">${getFlagEmoji(selectedCountry.flagCode)}</span> ${selectedCountry.chineseName} (${selectedCountry.continent})`;

            // Add a subtle "pop" animation to the slot display when it stops.
            // Briefly scale up then back down to draw attention.
            slotDisplay.style.transform = 'scale(1.05)'; // Scale up slightly
            setTimeout(() => {
                slotDisplay.style.transform = 'scale(1)'; // Scale back to normal
            }, 150); // Short delay for the "pop" effect


            // Construct the Perplexity URL with the chosen country's name.
            // The query is URL-encoded to handle special characters.
            const perplexityQuery = `Ë´ã‰ª•ÁπÅÈ´î‰∏≠Êñá100ÂÄãÂ≠ó‰ªãÁ¥π${selectedCountry.chineseName}ÁöÑÁÜ±ÈñÄÊôØÈªû`;
            const perplexityUrl = `https://www.perplexity.ai/search?q=${encodeURIComponent(perplexityQuery)}`;
            recommendButton.href = perplexityUrl; // Set the link for the recommend button
            recommendButton.style.display = 'inline-block'; // Show the "Recommend" button
        }

        // Add an event listener to the start button to trigger the spinning.
        startButton.addEventListener('click', startSpinning);

        // Initial setup when the page loads.
        // If there are countries in the data array, display the first one.
        // Otherwise, indicate that no data is available and disable the button.
        if (countries.length > 0) {
            updateSlotDisplay(countries[0]);
        } else {
            slotCountryName.textContent = "ÁÑ°ÂúãÂÆ∂Ë≥áÊñô";
            startButton.disabled = true;
        }
    </script>
</body>
</html>
